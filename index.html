<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socials</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/it_IT/sdk.js#xfbml=1&version=v17.0&appId=196540646641578&autoLogAppEvents=1" nonce="qRTD8Juf"></script>

    <section class="instagram">
        <h1>Instagram</h1>
        <h3>Profilo:</h3>
        <p>Username: <span id="username_ig"></span></p>
        <p>ID: <span id="id_ig"></span></p>

        <h3>Contenuti:</h3>
        <div class="media_wrapper" id="media_wrapper_ig">

        </div>
    </section>

    <section class="facebook">
        
        <h1>Facebook</h1>
        <div class="fb-login-button" data-width="120" data-size="" data-button-type="" data-layout="" data-auto-logout-link="true" data-use-continue-as="false"></div>
        <h3>Profilo:</h3>
        <p>Username: <span id="username_fb"></span></p>
        <p>ID: <span id="id_fb"></span></p>

        <h3>Contenuti:</h3>
        <div class="media_wrapper" id="media_wrapper_fb">

        </div>
    </section>

    <section class="tiktok">
        <h1>TikTok</h1>
    <!-- 	
        https://www.tiktok.com/v2/auth/authorize?client_key=aw4uv5g4eat1jc2m&response_type=code&scope=user.info.basic,video.list&redirect_uri=https://switchup-socials.vercel.app/&state=200 
    -->
        
        <a target="_blank"  href='https://www.tiktok.com/v2/auth/authorize?client_key=aw4uv5g4eat1jc2m&response_type=code&scope=user.info.basic,video.list&redirect_uri=https://switchup-socials.vercel.app/&state=200'>Continue with TikTok</a>
        <h3>Profilo:</h3>
        <p>Username: <span id="username_tt"></span></p>
        <p>ID: <span id="id_tt"></span></p>

        <h3>Contenuti:</h3>
        <div class="media_wrapper" id="media_wrapper_tt">

        <div class="embed-div">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@garyvee/video/7241975716701556011" data-video-id="7241975716701556011" style="max-width: 605px;min-width: 325px;" > <section> <a target="_blank" title="@garyvee" href="https://www.tiktok.com/@garyvee?refer=embed">@garyvee</a> <p>A lot of you are talking big big big game ..&#34;I&#39;m gonna be a billionaire&#34; &#34;I&#39;m the next Drake&#34; &#34;I&#39;m gonna be bezos&#34; &#34;I&#39;m the next Oprah&#34; &#34;im gonna change the XYZ&#34; watch this video and realllly understand this, like really let it sink in&#34; I love y&#39;all but man we need to get that work ethic to match your mouths ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›</p> <a target="_blank" title="â™¬ original sound - Gary Vaynerchuk" href="https://www.tiktok.com/music/original-sound-7241975775975689006?refer=embed">â™¬ original sound - Gary Vaynerchuk</a> </section> </blockquote> <script async src="https://www.tiktok.com/embed.js"></script>
        </div>

        </div>
    </section>
    

    <section class="linkedin">
        <h1>Linkedin</h1>
        <h3>Profilo:</h3>
        <p>Username: <span id="username_li"></span></p>
        <p>ID: <span id="id_li"></span></p>

        <h3>Contenuti:</h3>

        <iframe src="https://www.linkedin.com/embed/feed/update/urn:li:share:7055495867700510720" height="788" width="504" frameborder="0" allowfullscreen="" title="Post incorporato"></iframe>

        <div id="media_wrapper_li">

        </div>
        
        
    </section>
    
<!-- Facebook SDK -->
<script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '{your-app-id}',
        cookie     : true,
        xfbml      : true,
        version    : '{api-version}'
      });
        
      FB.AppEvents.logPageView();   
        
    };
  
    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "https://connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));



    //  API --------------------------------------------------
    const getMediaFb = async (accessToken) => {
        const url = `https://graph.facebook.com/me?fields=posts&access_token=${accessToken}`
        const data = await fetch(url)
        const posts = await data.json()

        console.log(posts);
        // displayMediaFb(profile)
    }

     FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
          var accessToken = response.authResponse.accessToken;
          console.log(accessToken);


         getMediaFb(accessToken)

        } 
        else {
            console.log('not connected');
        }
      } );

  </script>
    <script type="module" src="script.js" ></script>
</body>
</html>